<!DOCTYPE html>
<html>
  <head>
    <meta charset = "utf-8">
    <!-- Script for websocket communication, using the socket.io library to request a certain file-->
    <script src = "https://cdn.socket.io/socket.io-1.4.5.js">
    </script>
    <!-- second script to initialize websocket connection between client and server-->
    <script>
      //Important code to setup a socket connection for whoever accesses the client web page
      var socket = io();

      //variable function to be used to send message to the server from clicking the button (Passes button id as paraemeter)
      var userClicked = function(buttonId){
        socket.emit('joining', {
          reason: buttonId
        });
      }

      //Listen for server message of user clicking a button and update it as locked
      socket.on('userPlaying',function(buttonId){
        document.getElementById(buttonId).innerText = "Locked";
      });

      //Will constantly run for 30fps to check if both buttons are locked
      setInterval(function(){
        var firstButton = document.getElementById("firstButton");
        var secondButton = document.getElementById("secondButton");
        //Update the 'waiting...'' text to 'ready'
        if(firstButton.innerText == secondButton.innerText && firstButton.innerText == "Locked")
        {
          document.getElementById("loadingText").innerText = "Ready";
          clearInterval();
        }
      }, 1000/30);

    </script>
  </head>

  <body>
    <!-- Testing div block for basic_server_logic -->
    <div>
      <strong id = "loadingText"> Waiting... </strong>
      <br>
      <button onclick = "userClicked(this.id)" id = "firstButton"> Join </button>
      <button onclick = "userClicked(this.id)" id = "secondButton"> Join </button>
    </div>

  </body>
</html>
